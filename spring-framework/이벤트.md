# Spring Event

우리는 주문 서비스 구현 시, 요구 사항으로 주문 알림 메세지를 전달하는 동시에 혜택 안내 알림을 동시에 전송한다고 가정하자.

```java

@Service
@RequiredArgsConstructor
public class OrderService {
  private final OrderAlarmService orderAlarmService;
  private final BenefitAlarmService benefitAlarmService;

  public void order(string productName){
      //주문 로직 처리
      System.out.println("주문 완료");
  
      //주문 푸시 알림 전송
      orderAlarmService.sens(name);

      //혜책 푸시 알림 전송
      benefitAlarmService.send(name);
  }
}


```

이렇게 되었을 경우 크게 2가지 문제가 생길 수 있다. 

우선 주문 서비스에 주문 푸시 알림 전송 로직과 혜택 푸시 알림 전송 로직이 모두 강하게 결합되어 있기 때문에 유지보수가 어렵고 추후 확장이나 수정에 문제가 생길 수 있다.

두 번째로 해당 로직은 하나의 트랜잭션으로 동작하기 때문에 Rollback 발생 시, 알림 오류가 발생하다 주문이 롤백이 되어 버릴 수가 있다. 

우리는 위와 같은 상황을 해결하는 방법 중에 **Spring Event**를 통해 서비스 간의 강한 의존성을 줄이고 생성 주체의 상태 변경에 따라 이벤트를 발생시켜 원하는 기능을 후처리할 수 있다. (**Spring Framework 4.2 기준**)


## Spring Event 3가지 요소

1. Event class
2. Event publisher (이벤트 발생)
3. Event Listener (이벤트 받아들이는)


### Event class

```java
public class OrderEvent {

    private String productName;

    public OrderEvent(String productName){
        this.productName = productName;
    }

    public String getProductName(){
        return productName;
    }
}


```
