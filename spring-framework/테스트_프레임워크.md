# 테스트 프레임워크

Spring 공식 문서에서 Spring은 통합 테스트와 단위 테스트를 지원하고 TDD를 지지한다. 용어를 정리하면 아래와 같다. 

</br>

> <mark>TDD(Test-Driven-Development)</mark> : 테스트 주도 개발로 테스트 케이스를 먼저 작성한 후 실제 코드를 개발하는 절차를 의미한다. </br>
> <mark>통합 테스트(Integration Test)</mark> : 두 개 이상의 단위가 함께 잘 작동하는지 확인하는 테스트 </br>
> <mark>단위 테스트(Unit Test)</mark> : 소프트웨어 개발 과정에서 가장 작은 단위의 코드, 예를 들어 함수나 메서드 등을 대상으로 하는 테스트


보통 단위 테스트를 위해 JUnit을 많이 사용하고 Spring MVC 통합 테스트를 위해 MockMvc를 많이 사용한다.

</br>

## JUnit


</br>

## MockMVC

<mark>**Spring 프레임워크에서 제공하는 웹 애플리케이션 테스트용 라이브러리**</mark>

주로 Controller의 동작을 테스트하는데 사용한다. MockMvc를 사용하면 HTTP 요청을 작성하고 컨트롤러의 응답을 검증할 수 있다. 이를 통해 실제 서버에 구현한 Application을 올리지 않고 컨트롤러의 동작 확인이 가능하다.

</br>


### 사용법

아래와 같은 Controller의 GET 요청을 테스트 해보자고 하자. (@RestController : Spring 4.0에서 추가 기존 @Controller에 @ResponseBody가 추가, JSON 또는 XML 형식으로 HTTP 응답에 담아서 전송)

</br>

```java
@RestController
public class TestController {

    @GetMapping("/test")
    public String testGet(@RequestParam String name, @RequestParam String id){
        return name +": "+ id;
    }
}

```

해당 Controller에 대한 테스트 클래스를 아래와 같이 만들어준다.

```java
@RunWith(SpringRunner.class)
@WebMvcTest(TestController.class)
class TestControllerTest {

    @Autowired
    private MockMvc mockMvc;

    @Test
    void testGet() throws Exception {

        MultiValueMap<String, String> info = new LinkedMultiValueMap<>();

        info.add("name", "Jake");
        info.add("id", "11250");

        mockMvc.perform(
                MockMvcRequestBuilders.get("/test")
                        .params(info))
                .andExpect(status().isOk())
                .andExpect(content().string("Jake: 11250"))
                .andDo(print());

    }
}

```
