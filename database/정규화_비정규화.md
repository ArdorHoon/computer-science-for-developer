# 정규화와 비정규화

## 정규화 (Normalization)

<mark>**관계형 데이터베이스에서 중복을 최소화하기 위해 테이터를 구조화하는 작업**</mark>

이를 통해 테이블 간에 중복된 데이터를 허용하지 않음을 통해 무결성을 유지할 수 있으며, DB의 저장 욜량 역시 줄일 수 있다.

</br>

### 제1 정규화
<mark>**테이블 컬럼이 원자값을 갖도록 테이블을 분해하는 것**</mark>

아래의 그림을 보면 왼쪽 테이블은 여러 개의 직무를 갖고 있기 때문에 제1 정규화를 만족하지 못한다. 그래서 오른쪽 그림과 같이 분해해서 제1 정규화를 만족시킬 수 있다.

![1nf](https://github.com/user-attachments/assets/7d27462f-d262-4e0e-8abb-07f5343f056b)

</br>

### 제2 정규화

<mark>**제1 정규화를 진행한 테이블에 대해 완전 함수 종속을 만족하도록 테이블을 분해하는 것**</mark>

> 완전 함수 종속 : 기본키의 부분집합이 결정자가 되어선 안된다는 것

</br>


![2 drawio](https://github.com/user-attachments/assets/f35ac3e8-31a7-49ba-9b5a-bc038dc0d152)


이 테이블의 기본키는 (학생번호, 강좌이름)인 복합키이다. 그리고 해당 복합키가 성적을 결정하고 있다. 그런데 여기서 기본키의 부분집합인 강좌이름에 의해 강의실이 결정될 수 있다.
즉, 기본키(학생번호, 강좌이름)의 부분키인 강좌이름이 결정자이기 때문에 별도로 분해해야 제2 정규화를 만족할 수 있다.(아래 그림)

</br>

![2-1 drawio](https://github.com/user-attachments/assets/189c9567-31c0-42f5-b6b0-f863209d736a)


</br>

### 제3 정규화

<mark>**제2 정규화를 진행한 테이블에 대해 이행적 종속을 없애도록 테이블을 분해하는 것**</mark>

> 이행성 종속 : A -> B, B -> C가 성립할 때, A -> C가 성립되는 것을 의미

</br>

![3333 drawio](https://github.com/user-attachments/assets/8c29f8e1-88f9-402a-95c0-70cc1f04c92a)


</br>

위 테이블에서 학생 번호는 강좌 이름을 결정하고 강좌 이름은 수강료를 결정하고 있다. 그렇기 때문에 테이블을 (학생 번호, 강좌 이름) 테이블과 (강좌 이름, 수강료) 테이블로 분해해야 한다. 



![3_1 drawio](https://github.com/user-attachments/assets/b5603f5d-3904-464a-b401-b03f078ac3c2)


</br>

### BCNF 정규화

<mark>**제3 정규화를 진행한 테이블에 대해 모든 결정자가 후보키가 되도록 테이블을 분해하는 것**</mark>

![bcnf](https://github.com/user-attachments/assets/f11a246e-e8f6-4837-8dd1-6e3acae27a99)


해당 테이블에서 기본키는 (학생번호, 특강이름)이다. 그리고 기본키가 교수를 결정하고 있고 교수가 특강이름을 결정하고 있다. </br>

하지만 교수가 특강이름을 결정하는 결정자지만 후보키가 아니라는 문제점이 있다. 그렇게 때문에 테이블을 아래와 같이 분해해야 한다.  


![_bcnf_t drawio](https://github.com/user-attachments/assets/11766ded-9670-4ca5-8e03-6c9a939d6f7b)



</br>

## 비정규화 (Denormalization)

<mark>**하나 이상의 테이블에 데이터를 중복해 배치하는 최적화 기법**</mark>

시스템의 성능 향상, 개발 및 운영의 편의성 등을 위해 정규화된 데이터 모델을 통합, 중복, 분리하는 과정으로, 의도적으로 정규화 원칙을 위배하는 행위를 말한다.
이를 통해 데이터 갱신 비용이나 데이터 중복은 감수하는 대신 조인 횟수를 줄여 한층 효율적인 쿼리를 날릴 수 있다.

</br>

### 비정규화 대상
- 자주 사용되는 테이블에 액세스하는 프로세스 수가 가장 많고, 항상 일정한 범위만을 조회하는 경우
- 테이블에 대량 데이터가 있고 대량의 범위를 자주 처리하는 경우, 성능 상 이슈가 있을 경우
- 테이블에 지나치게 조인을 많이 사용하게 되어 데이터를 조회하는 것이 기술적으로 어려울 경우

> 실제로 대규모 IT 기업 같은 경우, 규모가 있고 확장성이 필요한 시스템에서 정규화된 데이터베이스와 비정규화된 데이터베이스를 섞어서 사용

</br>

### 장점
- 빠른 데이터 조회
- 데이터의 조회 쿼리가 간단해짐

</br>

### 단점
- 데이터 갱신이나 삽입 비용이 높고 코드 작성이 어려움
- 데이터 간의 일관성이 깨질 수 있음
- 데이터를 중복하여 저장하므로 더 많은 저장 공간이 필요

</br>
