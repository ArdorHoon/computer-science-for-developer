# 정규화와 비정규화

## 정규화 (Normalization)

<mark>**관계형 데이터베이스에서 중복을 최소화하기 위해 테이터를 구조화하는 작업**</mark>

이를 통해 테이블 간에 중복된 데이터를 허용하지 않음을 통해 무결성을 유지할 수 있으며, DB의 저장 욜량 역시 줄일 수 있다.

</br>

### 제1 정규화
<mark>**테이블 컬럼이 원자값을 갖도록 테이블을 분해하는 것**</mark>

아래의 그림을 보면 왼쪽 테이블은 여러 개의 직무를 갖고 있기 때문에 제1 정규화를 만족하지 못한다. 그래서 오른쪽 그림과 같이 분해해서 제1 정규화를 만족시킬 수 있다.

![1nf](https://github.com/user-attachments/assets/7d27462f-d262-4e0e-8abb-07f5343f056b)

</br>

### 제2 정규화

<mark>**제1 정규화를 진행한 테이블에 대해 완전 함수 종속을 만족하도록 테이블을 분해하는 것**</mark>

> 완전 함수 종속 : 기본키의 부분집합이 결정자가 도디어선 안된다는 것



</br>

### 제3 정규화

<mark>**제2 정규화를 진행한 테이블에 대해 이행적 종속을 없애도록 테이블을 분해하는 것**</mark>

> 이행성 종속 : A -> B, B -> C가 성립할 때, A -> C가 성립되는 것을 의미

</br>


### BCNF 정규화

<mark>**제3 정규화를 진행한 테이블에 대해 모든 결정자가 후보키가 되도록 테이블을 분해하는 것**</mark>




</br>

## 비정규화 (Denormalization)

<mark>**하나 이상의 테이블에 데이터를 중복해 배치하는 최적화 기법**</mark>

시스템의 성능 향상, 개발 및 운영의 편의성 등을 위해 정규화된 데이터 모델을 통합, 중복, 분리하는 과정으로, 의도적으로 정규화 원칙을 위배하는 행위를 말한다.
이를 통해 데이터 갱신 비용이나 데이터 중복은 감수하는 대신 조인 횟수를 줄여 한층 효율적인 쿼리를 날릴 수 있다.

</br>

### 비정규화 대상
- 자주 사용되는 테이블에 액세스하는 프로세스 수가 가장 많고, 항상 일정한 범위만을 조회하는 경우
- 테이블에 대량 데이터가 있고 대량의 범위를 자주 처리하는 경우, 성능 상 이슈가 있을 경우
- 테이블에 지나치게 조인을 많이 사용하게 되어 데이터를 조회하는 것이 기술적으로 어려울 경우

> 실제로 대규모 IT 기업 같은 경우, 규모가 있고 확장성이 필요한 시스템에서 정규화된 데이터베이스와 비정규화된 데이터베이스를 섞어서 사용

</br>

### 장점
- 빠른 데이터 조회
- 데이터의 조회 쿼리가 간단해짐

</br>

### 단점
- 데이터 갱신이나 삽입 비용이 높고 코드 작성이 어려움
- 데이터 간의 일관성이 깨질 수 있음
- 데이터를 중복하여 저장하므로 더 많은 저장 공간이 필요

</br>
